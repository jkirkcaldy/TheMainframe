#NEXTCLOUD CONTAINER

# REDIRECT HTTP TRAFFIC TO https://[themainframe.co.uk]
server {
	listen 80;
	server_name cloud.themainframe.co.uk;
	return 301 https://$server_name$request_uri;
	}

server {
	listen 443 ssl http2;
	server_name cloud.themainframe.co.uk;
	ssl_verify_client off;

#SSL settings
	include /etc/nginx/config/sub-strong-ssl.conf;

	include /etc/nginx/config/cloudflare.conf;

location / {
	proxy_pass https://10.10.0.2:443/;
	proxy_max_temp_file_size 2048m;

	include /etc/nginx/config/proxy.conf;
	proxy_hide_header X-Frame-Options; # Add this for allowing iframing nextcloud
  }
}
