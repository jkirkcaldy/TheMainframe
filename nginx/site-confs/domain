################################################################################################################
#////////////////////////////////////////////////SERVER BLOCKS\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\#
################################################################################################################
server  {
    if ($host = sso.themainframe.co.uk) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

  listen  80;
  server_name  sso.themainframe.co.uk;
  return 301 https://$host$request_uri;
}


################################################################################################################
#////////////////////////////////////////////////MAIN SERVER BLOCK\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\#
################################################################################################################

server {
	listen 443 ssl default_server;
        listen [::]:443 ssl default_server;
  server_name sso.themainframe.co.uk;

# Organizr
  location  / {
    proxy_pass  http://192.168.1.249:9983/;
  }

#server {
#	listen 443 ssl default_server;
#	server_name sso.themainframe.co.uk;
#
#	#SSL settings
	include /etc/nginx/strong-ssl.conf;
#
#	#Maxmind geoblock
	include /etc/nginx/geoblock.conf;
#
#	#Custom error pages
	include /etc/nginx/errorpages.conf;
#
#	#Organizr auth
	include /etc/nginx/serverauth.conf;
#
#	#Organizr container
#	include /etc/nginx/root.conf;
#
  include /etc/nginx/cloudflare.conf;
################################################################################################################
#////////////////////////////////////////////////SUBDIRECTORIES\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\#
################################################################################################################
	include /etc/nginx/subdirs/*.conf;


}
